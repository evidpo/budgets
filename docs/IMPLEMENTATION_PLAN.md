# План реализации проекта "Семейные финансы"

## Структура проекта

### Frontend (Next.js + TypeScript)
- [x] Инициализация Next.js приложения
- [x] Настройка TypeScript
- [x] Создание структуры страниц
- [x] Создание компонентов интерфейса
- [x] Реализация хуков для работы с данными
- [x] Настройка стилей
- [ ] Оптимизация производительности
- [ ] Тестирование компонентов
- [ ] Добавление PWA функциональности

### Backend (Supabase)
- [x] Настройка Supabase проекта
- [x] Создание схемы базы данных
- [x] Реализация миграций
- [x] Настройка Edge функций
- [x] Создание демо данных
- [ ] Настройка прав RLS (Row Level Security)
- [ ] Реализация API эндпоинтов
- [ ] Настройка реалтайм синхронизации
- [ ] Оптимизация запросов и индексов

### Функциональные модули

#### 1. Управление счетами ([`/accounts`](budgets/frontend/pages/accounts/index.tsx:1))
- [x] Отображение списка счетов
- [x] Реализация карточки счета
- [x] Поддержка сортировки перетаскиванием
- [ ] Добавление/редактирование счетов
- [ ] Архивация счетов
- [ ] Расчет и отображение балансов

#### 2. Управление транзакциями ([`/transactions`](budgets/frontend/pages/transactions/index.tsx:1))
- [x] Отображение списка транзакций
- [x] Реализация элемента транзакции
- [ ] Создание транзакций (доход/расход)
- [ ] Создание переводов между счетами
- [ ] Фильтрация транзакций
- [ ] Поддержка автокатегоризации

#### 3. Управление бюджетами ([`/budgets`](budgets/frontend/pages/budgets/index.tsx:1))
- [x] Отображение списка бюджетов
- [ ] Создание/редактирование бюджетов
- [ ] Поддержка разных периодов (неделя, месяц, квартал, год)
- [ ] Расчет и отображение доступных средств
- [ ] Поддержка переноса остатков
- [ ] Фильтрация транзакций по бюджетам

#### 4. Управление категориями ([`/categories`](budgets/frontend/pages/categories/index.tsx:1))
- [x] Отображение дерева категорий
- [ ] Создание/редактирование категорий
- [ ] Поддержка иерархии категорий
- [ ] Назначение иконок и цветов

#### 5. Управление долгами ([`/debts`](budgets/frontend/pages/debts/index.tsx:1))
- [x] Отображение списка долгов
- [ ] Создание/редактирование долгов
- [ ] Расчет остатков по долгам
- [ ] Связывание с транзакциями

#### 6. Правила автокатегоризации ([`/rules`](budgets/frontend/pages/rules/index.tsx:1))
- [ ] Реализация интерфейса для создания правил
- [ ] Поддержка разных типов правил (по плательщику, регулярным выражениям, паттернам суммы)
- [ ] Приоритезация правил
- [ ] Применение правил к транзакциям

#### 7. Отчеты ([`/reports`](budgets/frontend/pages/reports/index.tsx:1))
- [x] Заглушка для диаграмм
- [ ] Реализация отчета "Общий баланс"
- [ ] Реализация отчета "Движение за период"
- [ ] Реализация отчета "По бюджетам"
- [ ] Реализация отчета "По счетам"
- [ ] Реализация отчетов "Доходы/Расходы по категориям"
- [ ] Экспорт отчетов в CSV

#### 8. Импорт данных ([`/import`](budgets/frontend/pages/import/index.tsx:1))
- [ ] Реализация мастера импорта CSV
- [ ] Автоматическое определение формата
- [ ] Сопоставление полей
- [ ] Склейка переводов
- [ ] Предварительный просмотр и подтверждение импорта

### Интеграции и API
- [ ] Реализация REST API поверхности
- [ ] Настройка аутентификации (Supabase Auth)
- [ ] Реализация системы ролей (владелец, редактор, наблюдатель)
- [ ] Поддержка приглашений в household
- [ ] Обработка идемпотентности запросов

### Безопасность
- [ ] Настройка RLS политик
- [ ] Валидация данных на сервере
- [ ] Аудит изменений
- [ ] Безопасное хранение токенов

### Нефункциональные требования
- [ ] Поддержка 100k+ транзакций без деградации UX
- [ ] Курсорная пагинация
- [ ] Виртуализация списков
- [ ] Поддержка офлайн-режима (PWA)
- [ ] Доступность (контраст, фокус-стили, таб-навигация)

### Тестирование
- [ ] Модульное тестирование
- [ ] Интеграционное тестирование
- [ ] E2E тестирование
- [ ] Приемочное тестирование по сценариям из PRD

### Документация
- [x] Основная документация проекта
- [x] Лог реализации
- [x] План реализации
- [ ] Бизнес-требования
- [ ] Правила архитектуры
- [ ] Текущая архитектура
- [ ] Руководство пользователя
- [ ] Руководство разработчика

### Деплой и инфраструктура
- [ ] Настройка CI/CD
- [ ] Деплой frontend на Vercel
- [ ] Деплой backend на Supabase
- [ ] Мониторинг и логирование