# Семейные финансы

## Обзор

Проект "Семейные финансы" — это веб-приложение для управления личными и семейными финансами. Приложение позволяет отслеживать доходы и расходы, управлять бюджетами, контролировать долги и кредиты, а также формировать финансовые отчеты.

## Функциональные возможности

- **Управление счетами**: создание, редактирование и архивация счетов (банковские счета, наличные, кредиты и т.д.)
- **Управление транзакциями**: учет доходов, расходов и переводов между счетами с возможностью фильтрации
- **Бюджетирование**: планирование и контроль расходов/доходов по различным категориям и периодам (неделя, месяц, квартал, год, кастомный)
- **Категории**: иерархическая структура категорий с поддержкой иконок и цветов
- **Управление долгами**: учет займов, кредитов и долговых обязательств
- **Правила автокатегоризации**: автоматическое присвоение категорий транзакциям по различным критериям
- **Отчеты**: аналитика по бюджетам, счетам, доходам и расходам с фильтрацией и экспортом
- **Импорт данных**: загрузка финансовых данных из CSV (Alzex) с мастером склейки переводов
- **Совместная работа**: поддержка работы в "семье" (household) с ролями (владелец, редактор, наблюдатель)
- **Реалтайм синхронизация**: мгновенное обновление данных на всех устройствах

## Архитектура

Проект реализован по модульной архитектуре с разделением на frontend и backend слои:

- **Frontend**: Next.js приложение с использованием TypeScript, React Query и Tailwind CSS
- **Backend**: Supabase (PostgreSQL база данных, аутентификация и Edge функции)
- **База данных**: PostgreSQL с Row Level Security для изоляции данных
- **Реалтайм**: Supabase Realtime для подписки на изменения

### Структура проекта

```
budgets/
├── frontend/              # Next.js приложение
│   ├── pages/             # Страницы приложения (роутинг)
│   ├── components/        # React компоненты
│   ├── lib/               # Вспомогательные функции и типы
│   ├── hooks/             # Кастомные React хуки
│   ├── styles/            # Стили
│   └── public/            # Статические файлы
├── supabase/              # Конфигурация и миграции Supabase
│   ├── config.toml        # Конфигурация
│   ├── migrations/        # SQL миграции
│   ├── functions/         # Edge функции
│   └── seed.sql           # Демо данные
└── docs/                  # Документация
```

## Требования к запуску

- Node.js 18+
- npm или yarn
- Supabase CLI
- Docker (для локального запуска Supabase)

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd budgets
```

2. Установите зависимости frontend:
```bash
cd frontend
npm install
```

3. Установите зависимости backend:
```bash
cd supabase
supabase start
```

4. Создайте файл конфигурации frontend:
```bash
cp .env.local.example .env.local
```

5. Заполните переменные окружения в файле `.env.local`:
```
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

6. Запустите frontend:
```bash
npm run dev
```

Приложение будет доступно по адресу http://localhost:3000

## Лицензия

MIT

## Документация

Дополнительная документация доступна в директории `docs/`:
- [Требования](docs/requirements.md) - детализированные бизнес-требования
- [Архитектура](docs/architecture.md) - архитектурное решение с описанием всех компонентов
- [Руководство пользователя](docs/user-guide.md) - руководство пользователя для всех разделов приложения
- [API Reference](docs/api-reference.md) - документация по API
- [Схема базы данных](docs/database-schema.md) - схема базы данных с описанием всех таблиц
- [Развертывание](docs/deployment.md) - инструкция по развертыванию
- [Безопасность](docs/security.md) - описание мер безопасности и RLS политик
- [Разработка](docs/development.md) - руководство для разработчиков
- [История изменений](docs/changelog.md) - история изменений