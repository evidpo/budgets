# Семейные финансы

Веб-приложение для совместного управления семейными финансами с поддержкой счетов, транзакций, бюджетов, категорий, долгов и правил автокатегоризации.

## Основные возможности

- **Счета**: Управление различными типами счетов (наличные, банковские карты, кредитные карты и т.д.)
- **Транзакции**: Быстрое добавление доходов и расходов с поддержкой категорий
- **Бюджеты**: Планирование расходов и доходов с возможностью переноса остатка
- **Категории**: Иерархическая система категорий с поддержкой иконок и цветов
- **Долги**: Отслеживание долгов и обязательств
- **Правила**: Автоматическая категоризация транзакций на основе правил
- **Отчеты**: Подробная аналитика по расходам и доходам
- **Импорт**: Импорт данных из CSV файлов с мастером склейки переводов

## Технологии

- **Фронтенд**: Next.js, React, TypeScript, Tailwind CSS
- **Бэкенд**: Supabase (PostgreSQL, Auth, Realtime, Edge Functions)
- **Аутентификация**: Supabase Auth
- **База данных**: PostgreSQL с RLS (Row Level Security)
- **Развертывание**: Vercel (фронтенд), Supabase (бэкенд)

## Быстрый старт

### Запуск локальной версии

1. Убедитесь, что у вас установлены:
   - Node.js (версия 18 или выше)
   - npm (менеджер пакетов Node.js)

2. Запустите скрипт локального запуска:
   ```bash
   ./run-local.sh
   ```

3. Откройте браузер и перейдите по адресу: http://localhost:3000

### Переменные окружения

Файл `.env.local` в директории `frontend/` уже содержит необходимые переменные окружения для подключения к облачной базе данных Supabase:

```
NEXT_PUBLIC_SUPABASE_URL=https://wcnludyztjiziyriibvl.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indjbmx1ZHl6dGppeml5cmlpYnZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwNjI3NzgsImV4cCI6MjA3NDYzODc3OH0.1BmV2kqvlvkcObrL6q3785b3fLfmqQwUmj2MrY-9DAo
```

## Структура проекта

```
budgets/
├── frontend/                 # Фронтенд приложение (Next.js)
│   ├── components/           # React компоненты
│   ├── hooks/                # Пользовательские хуки
│   ├── lib/                  # Вспомогательные функции и типы
│   ├── pages/               # Страницы приложения
│   ├── public/               # Статические файлы
│   ├── styles/               # Стили
│   └── .env.local            # Переменные окружения
├── supabase/                 # Конфигурация Supabase
│   ├── migrations/           # SQL миграции
│   └── functions/            # Edge функции
├── docs/                     # Документация
└── run-local.sh              # Скрипт для локального запуска
```

## Разработка

### Фронтенд

Фронтенд приложение построено на Next.js с использованием React и TypeScript. Для стилизации используется Tailwind CSS.

Основные директории:
- `components/` - переиспользуемые компоненты
- `hooks/` - пользовательские React хуки
- `lib/` - вспомогательные функции, типы и константы
- `pages/` - страницы приложения, соответствующие маршрутам

### Бэкенд

Бэкенд построен на платформе Supabase, которая предоставляет:
- PostgreSQL базу данных с поддержкой RLS
- Аутентификацию и авторизацию
- Realtime обновления через WebSocket
- Edge функции для серверной логики

### База данных

Структура базы данных определена в миграциях в директории `supabase/migrations/`. Основные таблицы:
- `accounts` - счета пользователей
- `transactions` - транзакции (доходы/расходы)
- `budgets` - бюджеты
- `categories` - категории с иерархией
- `debts` - долги
- `rules` - правила автокатегоризации
- `households` - домохозяйства
- `members` - участники домохозяйств

## Развертывание

### Фронтенд

Для развертывания фронтенда используется Vercel. Проект автоматически развертывается при пуше в основную ветку репозитория.

### Бэкенд

Бэкенд работает на платформе Supabase. База данных и все сервисы уже настроены и готовы к использованию.

## Безопасность

Приложение использует встроенные механизмы безопасности Supabase:
- RLS (Row Level Security) для контроля доступа к данным на уровне строк
- JWT токены для аутентификации
- Поддержка ролевой модели (владелец, редактор, наблюдатель)

## Лицензия

Этот проект лицензирован по лицензии Apache 2.0 - подробности см. в файле [LICENSE](LICENSE).